<footer class="site-footer">
  <div class="site-footer-inner">
    <div class="footer-links">
      <a href="/terms.html" class="footer-link" data-i18n="footer.terms">Terms</a>
      <a href="/privacy.html" class="footer-link" data-i18n="footer.privacy">Privacy</a>
      <a href="/imprint.html" class="footer-link" data-i18n="footer.imprint">Imprint</a>
    </div>
    
    <div class="footer-copyright">
      &copy; <span id="current-year">2025</span> SoulTribe.chat. All rights reserved.
    </div>
    
  </div>
</footer>

<script>
  // Update current year
  document.getElementById('current-year').textContent = new Date().getFullYear();
  
  // Sync language selector with the one in navbar
  document.addEventListener('DOMContentLoaded', function() {
    const navLangSelector = document.getElementById('language-selector');
    const footerLinks = Array.from(document.querySelectorAll('.footer-links .footer-link'));
    const originalHrefs = footerLinks.map(a => a.getAttribute('href'));

    function currentLang() {
      // Prefer i18next setting, fallback to localStorage, default to 'en'
      try {
        if (window.i18next && typeof window.i18next.language === 'string') {
          return window.i18next.language;
        }
      } catch {}
      return localStorage.getItem('i18nextLng') || 'en';
    }

    function updateFooterLinkAvailability() {
      const lang = (currentLang() || 'en').split('-')[0];
      const isEnglish = lang === 'en';
      footerLinks.forEach((a, idx) => {
        if (isEnglish) {
          a.setAttribute('href', originalHrefs[idx] || '#');
          a.removeAttribute('aria-disabled');
          a.removeAttribute('tabindex');
          a.classList.remove('is-disabled');
          a.title = '';
          a.onclick = null;
        } else {
          a.setAttribute('aria-disabled', 'true');
          a.setAttribute('tabindex', '-1');
          a.classList.add('is-disabled');
          a.title = 'Available in English only';
          a.onclick = function(ev) {
            ev.preventDefault();
            ev.stopPropagation();
          };
        }
      });
    }

    if (navLangSelector) {
      navLangSelector.addEventListener('change', updateFooterLinkAvailability);
      navLangSelector.dispatchEvent(new Event('change'));
    } else {
      updateFooterLinkAvailability();
    }

    // Also react to i18n changes if fired
    if (window.i18next && typeof window.i18next.on === 'function') {
      window.i18next.on('languageChanged', updateFooterLinkAvailability);
    }
  });
