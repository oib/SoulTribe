<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SoulTribe.chat — Dashboard</title>
  <link rel="stylesheet" href="/theme.css" />
  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="stylesheet" href="/css/dashboard.css" />
  <link rel="stylesheet" href="/css/mobile.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/navbar.css" />
  <link rel="stylesheet" href="/css/footer.css" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#0b1220" />
</head>
<body>
  <!-- Navigation will be loaded here by components.js -->
  <div data-component="navbar"></div>
  

  <div class="two-col">
  <section class="card">
    <div class="card-head" style="display:flex; align-items:center; gap:12px;">
      <h2 data-i18n="dashboard.availability">Availability</h2>
    </div>
    <details class="muted availability-help">
      <summary data-i18n="dashboard.slot_help_summary">What is an availability slot?</summary>
      <p data-i18n="dashboard.slot_help_intro">Slots are the windows of time you publish so SoulTribe can suggest meetups when someone overlaps with you.</p>
      <ol class="muted availability-help-steps">
        <li data-i18n="dashboard.slot_help_step1">Add one or more slots for the days and hours you are free. The system saves them in your profile timezone and in UTC.</li>
        <li data-i18n="dashboard.slot_help_step2">When matches are fetched, we compare your slots with other members' slots to find overlapping times that are still in the future.</li>
        <li data-i18n="dashboard.slot_help_step3">Overlap chips in the Matches section show the shared window: UTC, your local time, and your match's local time.</li>
        <li data-i18n="dashboard.slot_help_step4">Click “Propose this time” on an overlap to launch the meetup flow with that slot pre-filled.</li>
        <li data-i18n="dashboard.slot_help_step5">If something changes, edit or delete the slot so we stop suggesting outdated times.</li>
      </ol>
    </details>
    <div class="avail-grid">
      <div class="avail-group">
        <input id="availStartDate" type="date" />
        <select id="availStartHour" title="Start hour (0–23)">
          <option value="0">00:00</option>
          <option value="1">01:00</option>
          <option value="2">02:00</option>
          <option value="3">03:00</option>
          <option value="4">04:00</option>
          <option value="5">05:00</option>
          <option value="6">06:00</option>
          <option value="7">07:00</option>
          <option value="8">08:00</option>
          <option value="9">09:00</option>
          <option value="10">10:00</option>
          <option value="11">11:00</option>
          <option value="12">12:00</option>
          <option value="13">13:00</option>
          <option value="14">14:00</option>
          <option value="15">15:00</option>
          <option value="16">16:00</option>
          <option value="17">17:00</option>
          <option value="18">18:00</option>
          <option value="19">19:00</option>
          <option value="20">20:00</option>
          <option value="21">21:00</option>
          <option value="22">22:00</option>
          <option value="23">23:00</option>
        </select>
      </div>
      <div class="avail-group">
        <select id="availDurationHours" data-i18n-title="dashboard.duration_hours" title="Duration (hours)">
          <option value="1">1 hour</option>
          <option value="2">2 hours</option>
          <option value="3">3 hours</option>
        </select>
      </div>
    </div>
    <div class="row" style="margin-top:10px;">
      <button id="btn-avail-create" class="primary" data-i18n="dashboard.create_slot">Create Slot</button>
    </div>
    <div class="row muted">
      <span id="availUtcHint"></span>
    </div>
    <ul id="availList"></ul>
  </section>

  <section class="card">
    <h2 data-i18n="dashboard.meetups">Meetups</h2>
    <div id="meetups"></div>
  </section>

  <section class="card">
    <h2 data-i18n="dashboard.matches">Matches</h2>
    <div class="muted" data-i18n="dashboard.active_filter_hint">Only users active in the last 30 days are shown.</div>
    <div class="muted" data-i18n="dashboard.overlap_hint">Click “Propose this time” on an overlap to propose a meetup for that slot.</div>
    <div id="matches"></div>
    <div id="matchesPager" class="pager-controls"></div>
  </section>
  </div>

  <script src="/js/app.js"></script>
  <script src="/i18n/i18n.js"></script>
  <script src="/js/components.js"></script>
  <script src="/js/dashboard.js"></script>
  <script>
    // Redirect back to login if no token
    (function ensureAuth(){
      try {
        const t = localStorage.getItem('access_token');
        if (!t) window.location.href = '/login.html';
      } catch {}
    })();
  </script>
  <!-- Footer will be loaded here by components.js -->
  <div data-component="footer"></div>
</body>
</html>
